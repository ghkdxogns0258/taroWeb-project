<!--taroresult.html-->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>타로 점 결과</title>
    <style>
        body {
            background-color: #232d32;
            font-family: Arial, sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto; /* 중앙 정렬 */
            display: flex;
            flex-direction: row-reverse; /* 좌우 반전 */
        }

        .left-container {
            flex: 1; /* 좌우 컨테이너를 1:2 비율로 설정 */
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .right-container {
            flex: 2; /* 우측 컨테이너 너비를 조정 */
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            text-align: center;
            margin-top: 0;
            color: orange; /* 주황색으로 변경 */
        }

        .button-group {
            text-align: right; /* 버튼 그룹을 우측 정렬 */
            margin-top: 20px;
        }

        .button-group button {
            display: block; /* 버튼을 블록 요소로 설정하여 위에서 아래로 배치 */
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px; /* 버튼 사이 간격 조정 */
            background-color: #007bff;
            color: #fff;
            border: none;
            position: relative; /* 상대적 위치 지정 */
        }

        .button-group button:last-child {
            margin-bottom: 0; /* 마지막 버튼의 하단 여백 제거 */
        }

        .button-group button:hover {
            background-color: #0056b3;
        }

        .button-group .active-label {
            position: absolute; /* 절대 위치 지정 */
            right: 10px; /* 오른쪽 여백 조정 */
            top: 50%; /* 상단 정렬 */
            transform: translateY(-50%); /* 세로 중앙 정렬 */
            font-size: 12px;
            color: green; /* 활성화 색상 지정 */
        }

        .button-group .checkbox {
            position: absolute; /* 절대 위치 지정 */
            right: 30px; /* 오른쪽 여백 조정 */
            top: 50%; /* 상단 정렬 */
            color: white;
            transform: translateY(-50%); /* 세로 중앙 정렬 */
        }

        #save-button {
            background-color: #007bff;
            color: #fff;
            border: none;
        }

        #save-button:hover {
            background-color: #0056b3;
        }


        /* 카드 이미지 스타일 */
        .card {
            max-width: 100px; /* 카드 이미지의 최대 너비를 조정 */
            height: auto; /* 높이 자동 조정 */
            margin-right: 10px; /* 각 카드 이미지 사이의 간격을 조정 */
        }

        /* 카드 컨테이너 스타일 */
        #card-container {
            display: flex;
            justify-content: center;
        }

        /* 점괘 내용을 숨기는 클래스 */
        .hidden {
            display: none;
        }

        /* 카드가 뒤집힌 상태의 스타일 */
        .card.reversed {
            transform: scaleY(-1); /* 위 아래로 뒤집기 */
        }
    </style>
</head>
<body>
    <h2>타로 점 결과</h2>
    <div class="container">
        <div class="left-container">
            <!-- 버튼 그룹 -->
            <div class="button-group">
                <button id="five-cards-button">파이브 카드</button>
                <button id="four-cards-button">포 카드</button>
                <button id="three-cards-button">쓰리 카드</button>
                <button id="one-card-button">원 카드</button>
                <!-- 역방향 체크박스로 변경 -->
                <label class="checkbox" style="position: absolute; right: 30px; top: auto; bottom: 10px;">
                    <input type="checkbox" id="reverse-checkbox"> 역방향
                </label>
                <!-- 메이저/마이너 체크박스 -->
                <label class="checkbox" style="position: absolute; right: 30px; top: auto; bottom: 30px;">
                    <input type="checkbox" id="major-minor-checkbox"> 메이저/마이너
                </label>
                <button id="restart-button">다시하기</button>
                <button id="save-button">저장</button>
                <!-- 점괘 보기 버튼 -->
                <button id="show-fortune-button">점괘 보기</button>
            </div>
            <!-- 점괘 내용 -->
            <div id="fortune-info" class="hidden">
                <!-- 여기에 점괘 내용이 표시됩니다. -->
            </div>
        </div>

        <div class="right-container">
            <!-- 이미지가 표시될 곳 -->
            <div id="image-container"></div>
            <!-- 카드가 표시될 곳 -->
            <div id="card-container"></div>
        </div>
    </div>

    <script>
        // "다시하기" 버튼
        document.getElementById("restart-button").addEventListener("click", function() {
            window.location.href = "start.html";
        });

        // "저장" 버튼
        document.getElementById("save-button").addEventListener("click", function() {
            saveImage();
        });

        // 이미지 저장 함수
        function saveImage() {
            const container = document.querySelector(".container");
            html2canvas(container).then(canvas => {
                // 이미지 URL 생성
                const image = canvas.toDataURL("image/png");
                // 이미지를 다운로드
                const link = document.createElement("a");
                link.href = image;
                link.download = "taro_result.png";
                link.click();
            });
        }

        // 점괘 보기 버튼
        document.getElementById("show-fortune-button").addEventListener("click", function() {
            const fortuneInfo = document.getElementById("fortune-info");
            fortuneInfo.classList.toggle("hidden"); // 숨김/표시 토글
            if (!fortuneInfo.classList.contains("hidden")) {
                // 점괘 내용을 보여줄 때만 작업
                // 여기에 점괘 내용을 표시하는 코드를 추가
                fortuneInfo.innerHTML = "<p>여기에 점괘 내용을 표시합니다.</p>";
            }
        });

        // 이미지 표시 함수
        function showImage(numOfImages) {
            const imageContainer = document.getElementById("image-container");
            imageContainer.innerHTML = ""; // 기존 이미지 삭제

            for (let i = 0; i < numOfImages; i++) {
                const image = document.createElement("img");
                image.src = "your_image_url.jpg"; // 이미지 경로 지정
                image.alt = "Your Image";
                image.classList.add("image");
                imageContainer.appendChild(image);
            }
        }

        // 카드를 보여주는 함수
        function showCards(numOfCards, isMajor) {
            const cardContainer = document.getElementById("card-container");
            cardContainer.innerHTML = ""; // 기존 카드 삭제

            const cardPath = isMajor ? "Major_card22/" : "Minor_card56/";
            const cardList = []; // 중복 카드 방지를 위한 배열

            while (cardList.length < numOfCards) {
                const randomCard = getRandomCard(isMajor);
                if (!cardList.includes(randomCard)) {
                    cardList.push(randomCard);
                    const card = document.createElement("img");
                    card.src = cardPath + randomCard + ".jpg";
                    card.alt = "타로 카드";
                    card.classList.add("card");
                    // 역방향 체크 여부에 따라 랜덤하게 뒤집기
                    if (document.getElementById("reverse-checkbox").checked && Math.random() < 0.3) {
                        card.classList.add("reversed");
                    }
                    cardContainer.appendChild(card);
                }
            }
        }

        // 버튼 클릭 이벤트 리스너
        document.getElementById("one-card-button").addEventListener("click", function() {
            showCards(1, !document.getElementById("major-minor-checkbox").checked); // 수정된 부분
        });

        document.getElementById("three-cards-button").addEventListener("click", function() {
            showCards(3, !document.getElementById("major-minor-checkbox").checked); // 수정된 부분
        });

        document.getElementById("four-cards-button").addEventListener("click", function() {
            showCards(4, !document.getElementById("major-minor-checkbox").checked); // 수정된 부분
        });

        document.getElementById("five-cards-button").addEventListener("click", function() {
            showCards(5, !document.getElementById("major-minor-checkbox").checked); // 수정된 부분
        });

        // 역방향 체크박스 상태에 따라 이미지 회전
        document.getElementById("reverse-checkbox").addEventListener("change", function() {
            const reverseCheckbox = document.getElementById("reverse-checkbox");
            const cards = document.querySelectorAll(".card");

            // 역방향 체크박스가 체크되었는지 확인
            if (reverseCheckbox.checked) {
                // 역방향일 경우 각 카드 이미지를 뒤집기
                cards.forEach(card => {
                    if (Math.random() < 0.3) {
                        card.classList.add("reversed");
                    }
                });
            } else {
                // 역방향이 아닐 경우 각 카드 이미지를 다시 되돌리기
                cards.forEach(card => {
                    card.classList.remove("reversed");
                });
            }
        });

        // 메이저/마이너 체크박스
        const majorMinorCheckbox = document.getElementById("major-minor-checkbox");
        const majorMinorButtons = document.querySelectorAll(".button-group button:not(#restart-button):not(#save-button):not(#show-fortune-button)");

        majorMinorCheckbox.addEventListener("change", function() {
            if (majorMinorCheckbox.checked) {
                majorMinorButtons.forEach(button => {
                    button.disabled = false;
                });
                majorMinorCheckbox.nextElementSibling.textContent = "활성화됨";
            } else {
                majorMinorButtons.forEach(button => {
                    button.disabled = false; // 버튼을 비활성화하는 대신 활성화 상태를 유지
                });
                majorMinorCheckbox.nextElementSibling.textContent = "";
            }
        });

        // 랜덤 카드 선택 함수
        function getRandomCard(isMajor) {
            const cardNames = isMajor ?
                ["00_The_Fool", "01_The_Magician", "02_The_High_Priestess", "03_The_Empress", "04_The_Emperor",
                "05_The_Hierophant", "06_The_Lovers", "07_The_Chariot", "08_Strength", "09_The_Hermit",
                "10_Wheel_of_Fortune", "11_Justice", "12_The_Hanged_Man", "13_Death", "14_Temperance",
                "15_The_Devil", "16_The_Tower", "17_The_Star", "18_The_Moon", "19_The_Sun",
                "20_Judgement", "21_The_World"] :
                ["00_The_Fool", "01_The_Magician", "02_The_High_Priestess", "03_The_Empress", "04_The_Emperor",
                "05_The_Hierophant", "06_The_Lovers", "07_The_Chariot", "08_Strength", "09_The_Hermit",
                "10_Wheel_of_Fortune", "11_Justice", "12_The_Hanged_Man", "13_Death", "14_Temperance",
                "15_The_Devil", "16_The_Tower", "17_The_Star", "18_The_Moon", "19_The_Sun",
                "20_Judgement", "21_The_World", "Ace_of_Cups", "Two_of_Cups", "Three_of_Cups", "Four_of_Cups", "Five_of_Cups", "Six_of_Cups",
                "Seven_of_Cups", "Eight_of_Cups", "Nine_of_Cups", "Ten_of_Cups", "Page_of_Cups", "Knight_of_Cups",
                "Queen_of_Cups", "King_of_Cups", "Ace_of_Pentacles", "Two_of_Pentacles", "Three_of_Pentacles",
                "Four_of_Pentacles", "Five_of_Pentacles", "Six_of_Pentacles", "Seven_of_Pentacles", "Eight_of_Pentacles",
                "Nine_of_Pentacles", "Ten_of_Pentacles", "Page_of_Pentacles", "Knight_of_Pentacles", "Queen_of_Pentacles",
                "King_of_Pentacles", "Ace_of_Swords", "Two_of_Swords", "Three_of_Swords", "Four_of_Swords", "Five_of_Swords",
                "Six_of_Swords", "Seven_of_Swords", "Eight_of_Swords", "Nine_of_Swords", "Ten_of_Swords", "Page_of_Swords",
                "Knight_of_Swords", "Queen_of_Swords", "King_of_Swords", "Ace_of_Wands", "Two_of_Wands", "Three_of_Wands",
                "Four_of_Wands", "Five_of_Wands", "Six_of_Wands", "Seven_of_Wands", "Eight_of_Wands", "Nine_of_Wands",
                "Ten_of_Wands", "Page_of_Wands", "Knight_of_Wands", "Queen_of_Wands", "King_of_Wands"];

            const randomIndex = Math.floor(Math.random() * cardNames.length);
            return cardNames[randomIndex];
        }
    </script>
</body>
</html>
